{"ast":null,"code":"import _regeneratorRuntime from\"/Users/metehan/Downloads/ord/sats-connect-example-main 2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/metehan/Downloads/ord/sats-connect-example-main 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/metehan/Downloads/ord/sats-connect-example-main 2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AddressPurpose,BitcoinNetworkType,getAddress,getCapabilities}from\"sats-connect\";import CreateFileInscription from\"./components/createFileInscription\";import CreateTextInscription from\"./components/createTextInscription\";import SendBitcoin from\"./components/sendBitcoin\";import SignMessage from\"./components/signMessage\";import SignTransaction from\"./components/signTransaction\";import{useLocalStorage}from\"./useLocalStorage\";import{useEffect,useState}from\"react\";import\"./App.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _useLocalStorage=useLocalStorage(\"paymentAddress\"),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),paymentAddress=_useLocalStorage2[0],setPaymentAddress=_useLocalStorage2[1];var _useLocalStorage3=useLocalStorage(\"paymentPublicKey\"),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),paymentPublicKey=_useLocalStorage4[0],setPaymentPublicKey=_useLocalStorage4[1];var _useLocalStorage5=useLocalStorage(\"ordinalsAddress\"),_useLocalStorage6=_slicedToArray(_useLocalStorage5,2),ordinalsAddress=_useLocalStorage6[0],setOrdinalsAddress=_useLocalStorage6[1];var _useLocalStorage7=useLocalStorage(\"ordinalsPublicKey\"),_useLocalStorage8=_slicedToArray(_useLocalStorage7,2),ordinalsPublicKey=_useLocalStorage8[0],setOrdinalsPublicKey=_useLocalStorage8[1];var _useLocalStorage9=useLocalStorage(\"network\",BitcoinNetworkType.Testnet),_useLocalStorage10=_slicedToArray(_useLocalStorage9,2),network=_useLocalStorage10[0],setNetwork=_useLocalStorage10[1];var _useState=useState(\"loading\"),_useState2=_slicedToArray(_useState,2),capabilityState=_useState2[0],setCapabilityState=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),capabilities=_useState4[0],setCapabilities=_useState4[1];useEffect(function(){var runCapabilityCheck=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var runs,MAX_RUNS;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:runs=0;MAX_RUNS=20;setCapabilityState(\"loading\");// the wallet's in-page script may not be loaded yet, so we'll try a few times\ncase 3:if(!(runs<MAX_RUNS)){_context.next=17;break;}_context.prev=4;_context.next=7;return getCapabilities({onFinish:function onFinish(response){setCapabilities(new Set(response));setCapabilityState(\"loaded\");},onCancel:function onCancel(){setCapabilityState(\"cancelled\");},payload:{network:{type:network}}});case 7:_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](4);runs++;if(runs===MAX_RUNS){setCapabilityState(\"missing\");}case 13:_context.next=15;return new Promise(function(resolve){return setTimeout(resolve,100);});case 15:_context.next=3;break;case 17:case\"end\":return _context.stop();}},_callee,null,[[4,9]]);}));return function runCapabilityCheck(){return _ref.apply(this,arguments);};}();runCapabilityCheck();},[network]);var isReady=!!paymentAddress&&!!paymentPublicKey&&!!ordinalsAddress&&!!ordinalsPublicKey;var onWalletDisconnect=function onWalletDisconnect(){setPaymentAddress(undefined);setPaymentPublicKey(undefined);setOrdinalsAddress(undefined);setOrdinalsPublicKey(undefined);};var toggleNetwork=function toggleNetwork(){setNetwork(network===BitcoinNetworkType.Testnet?BitcoinNetworkType.Mainnet:BitcoinNetworkType.Testnet);onWalletDisconnect();};var onConnectClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAddress({payload:{purposes:[AddressPurpose.Ordinals,AddressPurpose.Payment],message:\"SATS Connect Demo\",network:{type:network}},onFinish:function onFinish(response){var paymentAddressItem=response.addresses.find(function(address){return address.purpose===AddressPurpose.Payment;});setPaymentAddress(paymentAddressItem===null||paymentAddressItem===void 0?void 0:paymentAddressItem.address);setPaymentPublicKey(paymentAddressItem===null||paymentAddressItem===void 0?void 0:paymentAddressItem.publicKey);var ordinalsAddressItem=response.addresses.find(function(address){return address.purpose===AddressPurpose.Ordinals;});setOrdinalsAddress(ordinalsAddressItem===null||ordinalsAddressItem===void 0?void 0:ordinalsAddressItem.address);setOrdinalsPublicKey(ordinalsAddressItem===null||ordinalsAddressItem===void 0?void 0:ordinalsAddressItem.publicKey);},onCancel:function onCancel(){return alert(\"Request canceled\");}});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function onConnectClick(){return _ref2.apply(this,arguments);};}();var capabilityMessage=capabilityState===\"loading\"?\"Checking capabilities...\":capabilityState===\"cancelled\"?\"Capability check cancelled by wallet. Please refresh the page and try again.\":capabilityState===\"missing\"?\"Could not find an installed Sats Connect capable wallet. Please install a wallet and try again.\":!capabilities?\"Something went wrong with getting capabilities\":undefined;if(capabilityMessage){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:30},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sats Connect Test App - \",network]}),/*#__PURE__*/_jsx(\"div\",{children:capabilityMessage})]});}if(!isReady){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:30},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sats Connect Test App - \",network]}),/*#__PURE__*/_jsx(\"div\",{children:\"Please connect your wallet to continue\"}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"lightgray\",padding:30,marginTop:10},children:[/*#__PURE__*/_jsx(\"button\",{style:{height:30,width:180},onClick:toggleNetwork,children:\"Switch Network\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{style:{height:30,width:180},onClick:onConnectClick,children:\"Connect\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:30},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sats Connect Test App - \",network]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Payment Address: \",paymentAddress]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Ordinals Address: \",ordinalsAddress]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Disconnect wallet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onWalletDisconnect,children:\"Disconnect\"})]}),/*#__PURE__*/_jsx(SignTransaction,{paymentAddress:paymentAddress,paymentPublicKey:paymentPublicKey,ordinalsAddress:ordinalsAddress,ordinalsPublicKey:ordinalsPublicKey,network:network,capabilities:capabilities}),/*#__PURE__*/_jsx(SignMessage,{address:ordinalsAddress,network:network,capabilities:capabilities}),/*#__PURE__*/_jsx(SendBitcoin,{address:paymentAddress,network:network,capabilities:capabilities}),/*#__PURE__*/_jsx(CreateTextInscription,{network:network,capabilities:capabilities}),/*#__PURE__*/_jsx(CreateFileInscription,{network:network,capabilities:capabilities})]})]});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}